var __reflect=this&&this.__reflect||function(e,t,i){e.__class__=t,i?i.push(t):i=[t],e.__types__=e.__types__?i.concat(e.__types__):i},__extends=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},__awaiter=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(o,r){function a(e){try{c(n.next(e))}catch(t){r(t)}}function s(e){try{c(n["throw"](e))}catch(t){r(t)}}function c(e){e.done?o(e.value):new i(function(t){t(e.value)}).then(a,s)}c((n=n.apply(e,t||[])).next())})},__generator=this&&this.__generator||function(e,t){function i(e){return function(t){return n([e,t])}}function n(i){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,r&&(a=r[2&i[0]?"return":i[0]?"throw":"next"])&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[0,a.value]),i[0]){case 0:case 1:a=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(a=s.trys,!(a=a.length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){s.label=i[1];break}if(6===i[0]&&s.label<a[1]){s.label=a[1],a=i;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(i);break}a[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(n){i=[6,n],r=0}finally{o=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}var o,r,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return{next:i(0),"throw":i(1),"return":i(2)}},ModalLayer=function(e){function t(t,i){var n=e.call(this)||this;return n.modal=new Modal(t,i),n.addChild(n.modal),n.addEventListener(egret.Event.ADDED_TO_STAGE,function(){egret.Tween.get(n).set({alpha:.3}).to({alpha:1},200)},n),n}return __extends(t,e),t}(egret.DisplayObjectContainer);__reflect(ModalLayer.prototype,"ModalLayer");var People=function(e){function t(t){var i,n=e.call(this)||this;return i="0"==t?"pic_ql_png":"pic_dsg_"+t+"_png",n.pBg=new Bitmap({source:i,x:0,y:0}),n.addChild(n.pBg),n.anchorOffsetX=n.width/2,n}return __extends(t,e),t}(egret.Sprite);__reflect(People.prototype,"People");var Button=function(e){function t(t,i){var n,o,r=e.call(this)||this;return 0==t&&(n="btn_public_n_png"),1==t&&(n="btn_public_p_png"),0==i&&(o="btn_pic_djzb_png"),1==i&&(o="btn_pic_dadf_png"),2==i&&(o="btn_pic_hdsy_png"),r.btnBg=new Bitmap({source:n}),r.addChild(r.btnBg),r.btnType=new Bitmap({source:o}),r.btnType.x=(r.btnBg.width-r.btnType.width)/2,r.btnType.y=(r.btnBg.height-r.btnType.height)/2-6,r.addChild(r.btnType),r}return __extends(t,e),Object.defineProperty(t.prototype,"Bg",{get:function(){return this.btnBg.src},set:function(e){this.btnBg.src=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Type",{get:function(){return this.btnType.src},set:function(e){this.btnType.src=e},enumerable:!0,configurable:!0}),t}(egret.Sprite);__reflect(Button.prototype,"Button");var ImageLoader=function(e){function t(t){var i=e.call(this)||this,n=i;return n.imgMask=t.mask||null,n.W=t.width||0,n.H=t.height||0,t.maskConfig&&(n.imgMask=new egret.Shape,n.imgMask.graphics.beginFill(13421772),n.imgMask.graphics.drawRoundRect(0,0,t.maskConfig[0]||0,t.maskConfig[1]||0,t.maskConfig[2]||0),n.imgMask.graphics.endFill()),n.src=t.src,i.x=t.x||i.x,i.y=t.y||i.y,i}return __extends(t,e),Object.defineProperty(t.prototype,"src",{get:function(){return this._src},set:function(e){this._src=e,this.setSrc(e)},enumerable:!0,configurable:!0}),t.prototype.setSrc=function(e){var t=this;if(e){var i=new egret.ImageLoader;i.once(egret.Event.COMPLETE,function(e){t.removeChildren();var i=e.currentTarget;t.image=new egret.Bitmap(i.data),t.W&&(t.image.scaleX=t.W/t.image.width),t.H&&(t.image.scaleY=t.H/t.image.height),t.imgMask&&(t.addChild(t.imgMask),t.image.mask=t.imgMask),t.addChild(t.image)},this),i.load(e)}},t}(egret.Sprite);__reflect(ImageLoader.prototype,"ImageLoader");var LoadingLayer=function(e){function t(){var t=e.call(this)||this;t.width=UIConfig.stageW,t.height=UIConfig.stageH;var i=new egret.Shape;return i.graphics.beginFill(0,.6),i.graphics.drawRoundRect(0,0,250,250,20),i.x=(t.width-i.width)/2,i.y=(t.height-i.height)/2,t.addChild(i),t}return __extends(t,e),t}(egret.DisplayObjectContainer);__reflect(LoadingLayer.prototype,"LoadingLayer");var Mask=function(e){function t(t){void 0===t&&(t=.5);var i=e.call(this)||this;return i.graphics.beginFill(0,t),i.graphics.drawRect(0,0,1,1),i.scaleX=UImanager.container.width+500,i.scaleY=UImanager.container.height+500,i.touchEnabled=!0,i.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){},i),i}return __extends(t,e),t}(egret.Shape);__reflect(Mask.prototype,"Mask");var Modal=function(e){function t(t,i){var n=e.call(this)||this;return n.width=t,n.height=i,n.bgMask=new Mask,n.addChild(n.bgMask),n.bgMask.x=-(UImanager.container.width-n.width)/2,n.bgMask.y=-(UImanager.container.height-n.height)/2,n.modalBg=new egret.Shape,n.modalBg.graphics.beginFill(16774565,1),n.modalBg.graphics.drawRect(0,0,t,i),n.modalBg.graphics.endFill(),n.addChild(n.modalBg),n.cirBg=new Bitmap({source:"pic_djs_bg_png"}),n.cirBg.x=(t-n.cirBg.width)/2,n.cirBg.y=(i-n.cirBg.height)/2,n.addChild(n.cirBg),n}return __extends(t,e),t}(egret.DisplayObjectContainer);__reflect(Modal.prototype,"Modal");var Bitmap=function(e){function t(t){var i=e.call(this)||this,n=i;return"string"==typeof t?n.src=t:"object"==typeof t&&(void 0!=t.source&&(n.src=t.source),void 0!=t.width&&(n.width=t.width),void 0!=t.height&&(n.height=t.height),void 0!=t.x&&(n.x=t.x),void 0!=t.y&&(n.y=t.y),void 0!=t.rotation&&(n.rotation=t.rotation),t.anchorCenter?(n.anchorOffsetX=n.width/2,n.anchorOffsetY=n.height/2):(void 0!=t.anchorOffsetX&&(n.anchorOffsetX=t.anchorOffsetX),void 0!=t.anchorOffsetY&&(n.anchorOffsetY=t.anchorOffsetY)),void 0!=t.alpha&&(n.alpha=t.alpha),void 0!=t.visible&&(n.visible=t.visible),void 0!=t.touchEnabled&&(n.touchEnabled=t.touchEnabled)),i}return __extends(t,e),Object.defineProperty(t.prototype,"src",{get:function(){return this._src},set:function(e){this._src=e,this.texture=RES.getRes(e)},enumerable:!0,configurable:!0}),t}(egret.Bitmap);__reflect(Bitmap.prototype,"Bitmap");var TextField=function(e){function t(t){var i=e.call(this)||this,n=i;return"string"==typeof t?n.text=t:"object"==typeof t&&(n.fontFamily=t.fontFamily||"PingFang SC,Microsoft YaHei",void 0!=t.text&&(n.text=t.text),void 0!=t.color&&(n.textColor=t.color),void 0!=t.size&&(n.size=t.size),void 0!=t.bold&&(n.bold=t.bold),void 0!=t.width&&(n.width=t.width),void 0!=t.height&&(n.height=t.height),void 0!=t.x&&(n.x=t.x),void 0!=t.y&&(n.y=t.y),t.rotation&&(n.rotation=t.rotation),void 0!=t.anchorCenter&&(n.anchorOffsetX=n.width/2),void 0!=t.anchorCenter&&(n.anchorOffsetY=n.height/2),void 0!=t.anchorOffsetX&&(n.anchorOffsetX=t.anchorOffsetX),void 0!=t.anchorOffsetY&&(n.anchorOffsetY=t.anchorOffsetY),void 0!=t.textAlign&&(n.textAlign=t.textAlign),void 0!=t.verticalAlign&&(n.verticalAlign=t.verticalAlign),void 0!=t.lineSpacing&&(n.lineSpacing=t.lineSpacing),void 0!=t.multiline&&(n.multiline=t.multiline)),i}return __extends(t,e),Object.defineProperty(t.prototype,"ID",{set:function(e){this.text="ID:"+e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"IP",{set:function(e){this.text="IP:"+e},enumerable:!0,configurable:!0}),t}(egret.TextField);__reflect(TextField.prototype,"TextField");var Clock=function(e){function t(){var t=e.call(this)||this;return t.allTime=120,t.cTime=new egret.Timer(1e3,120),t.cText=new BitmapText({text:"00:00",source:"pic_djs_fnt",width:150,textAlign:"center",letterSpacing:5}),t.addChild(t.cText),EventManager.sub("startClock",function(e){t.allTime=e,t.start()}),EventManager.sub("stopClock",function(){t.stop()}),t}return __extends(t,e),Object.defineProperty(t.prototype,"time",{set:function(e){this.allTime=e},enumerable:!0,configurable:!0}),t.prototype.start=function(){this.cTime.repeatCount=GameData.countDown,this.cText.text=this.transFormat(this.allTime),this.cTime.addEventListener(egret.TimerEvent.TIMER,this.subTime,this),this.cTime.addEventListener(egret.TimerEvent.TIMER_COMPLETE,this.timeOver,this),this.cTime.reset(),this.cTime.start(),console.info("clock start"),this.visible=!0},t.prototype.timeOver=function(){this.cTime&&this.cTime.stop(),null==this.cTime,console.info("clock stop")},t.prototype.stop=function(){this.visible=!1,this.timeOver()},t.prototype.subTime=function(){0!=this.allTime&&(this.allTime-=1,this.cText.text=this.transFormat(this.allTime))},t.prototype.transFormat=function(e){var t,i;return e%60==0?(t=Math.floor(e/60).toString(),"0"+t+":00"):(t=Math.floor(e/60).toString(),i=(e-60*parseInt(t)).toString(),1==t.length&&(t="0"+t),1==i.length&&(i="0"+i),t+":"+i)},t}(egret.Sprite);__reflect(Clock.prototype,"Clock");var FindTip=function(e){function t(){var t=e.call(this)||this;return t.fCopy=["目前你们都没有找到情侣哦，抓紧时间找到他们并拆散这对情侣吧","已锁定情侣，帮助对方也找到这对狗男女，即可干掉这对情侣！","对方已锁定情侣，多听一下对方的描述，会帮助你更快的找到这对情侣哦"],t.fBg=new Bitmap({source:"public_bgk_png",width:230,height:53}),t.addChild(t.fBg),t.fCont=new TextField({fontFamily:"YouYuan",text:t.fCopy[0],color:16777215,size:14,width:220,height:50,textAlign:"center",verticalAlign:"middle",multiline:!0,lineSpacing:4}),t.addChild(t.fCont),t}return __extends(t,e),Object.defineProperty(t.prototype,"cont",{get:function(){return this.fCont.text},set:function(e){this.fCont.text=e},enumerable:!0,configurable:!0}),t}(egret.DisplayObjectContainer);__reflect(FindTip.prototype,"FindTip");var KillTip=function(e){function t(){var t=e.call(this)||this;return t.levTip=new TextField({text:"Level 1",color:"black",size:14,fontFamily:"YOUYUAN",textAlign:"right",width:136,bold:!0}),t.addChild(t.levTip),t.killTip=new TextField({text:"已干掉情侣:999",color:"black",size:16,fontFamily:"YOUYUAN",textAlign:"right",y:20,width:136,bold:!0}),t.addChild(t.killTip),t}return __extends(t,e),Object.defineProperty(t.prototype,"level",{set:function(e){this.levTip.text="Level "+e;var t=parseInt(e);this.killTip.text="已干掉情侣:"+(t-1)},enumerable:!0,configurable:!0}),t}(egret.Sprite);__reflect(KillTip.prototype,"KillTip");var BitmapText=function(e){function t(t){var i=e.call(this)||this,n=i;return"string"==typeof t?n.src=t:"object"==typeof t&&(void 0!=t.source&&(n.src=t.source),void 0!=t.width&&(n.width=t.width),void 0!=t.height&&(n.height=t.height),void 0!=t.text&&(n.text=t.text),void 0!=t.textAlign&&(n.textAlign=t.textAlign),void 0!=t.verticalAlign&&(n.verticalAlign=t.verticalAlign),void 0!=t.letterSpacing&&(n.letterSpacing=t.letterSpacing),void 0!=t.lineSpacing&&(n.lineSpacing=t.lineSpacing),void 0!=t.x&&(n.x=t.x),void 0!=t.y&&(n.y=t.y),void 0!=t.anchorOffsetX&&(n.anchorOffsetX=t.anchorOffsetX),void 0!=t.anchorOffsetY&&(n.anchorOffsetY=t.anchorOffsetY),void 0!=t.scaleX&&(n.scaleX=t.scaleX),void 0!=t.scaleY&&(n.scaleY=t.scaleY)),i}return __extends(t,e),Object.defineProperty(t.prototype,"cont",{get:function(){return this._cont},set:function(e){this._cont=e,this.text=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"src",{get:function(){return this._src},set:function(e){this._src=e,this.font=RES.getRes(e)},enumerable:!0,configurable:!0}),t}(egret.BitmapText);__reflect(BitmapText.prototype,"BitmapText");var TimeTip=function(e){function t(){var t=e.call(this)||this;return t.tCopy=["点错会减少5秒哦","对友点错，减少5秒！","你点错了，减少5秒！"],t.tBg=new Bitmap({source:"public_bgk_png",width:126,height:37}),t.addChild(t.tBg),t.tCont=new TextField({fontFamily:"YouYuan",text:t.tCopy[0],color:16777215,size:14,width:116,height:30,textAlign:"center",verticalAlign:"middle",lineSpacing:3}),t.addChild(t.tCont),t}return __extends(t,e),Object.defineProperty(t.prototype,"cont",{get:function(){return this.tCont.text},set:function(e){this.tCont.text=e},enumerable:!0,configurable:!0}),t}(egret.DisplayObjectContainer);__reflect(TimeTip.prototype,"TimeTip");var ScoreBar=function(e){function t(t){var i,n=e.call(this)||this;return 0==t&&(i="pic_zdf_png"),1==t&&(i="pic_zpm_png"),n.sType=new Bitmap({source:i}),n.addChild(n.sType),n.sBg=new Bitmap({source:"public_bgk_png",width:115,height:35}),n.sBg.x=n.sType.width,n.addChild(n.sBg),n.sCont=new BitmapText({text:"",source:"pic_sz_fnt",width:115,height:34,textAlign:"center",verticalAlign:"middle"}),n.sCont.x=n.sBg.x+5,n.sCont.y=n.sBg.y,n.addChild(n.sCont),n}return __extends(t,e),Object.defineProperty(t.prototype,"score",{get:function(){return this.sCont.text},set:function(e){this.sCont.text=e},enumerable:!0,configurable:!0}),t}(egret.DisplayObjectContainer);__reflect(ScoreBar.prototype,"ScoreBar");var AnimationModal=function(e){function t(){var t=e.call(this,710,186)||this;t.ct321=[],t.width=710,t.height=186,t.x=(UImanager.container.width-t.width)/2,console.log("Imanager.stageH:",UImanager.stageH),t.y=(UImanager.container.height-t.height)/2;for(var i=["pic_djs_1_png","pic_djs_2_png","pic_djs_3_png"],n=0;n<i.length;n++)t.ct321[n]=new Bitmap({source:i[n]}),t.ct321[n].x=(710-t.ct321[n].width)/2,t.ct321[n].y=(186-t.ct321[n].height)/2,t.ct321[n].visible=!1,2==n&&(t.ct321[n].visible=!0),t.addChild(t.ct321[n]);return t.pBoy=new Bitmap({source:"pic_man_fk_png",x:360}),t.pBoy.y=(186-t.pBoy.height)/2,t.addChild(t.pBoy),t.pGirl=new Bitmap({x:80,source:"pic_woman_fk_png"}),t.pGirl.y=(186-t.pGirl.height)/2,t.addChild(t.pGirl),t.aniTimer=new egret.Timer(1e3,GameData.ctTime),EventManager.sub("startCT",function(){t.start();var e=t.pBoy,i=t.pGirl;egret.Tween.get(e).to({x:e.x+GameData.offX},2e3,egret.Ease.sineIn),egret.Tween.get(i).to({x:i.x-GameData.offX},2e3,egret.Ease.sineIn)}),t}return __extends(t,e),t.prototype.start=function(){this.ctCount=GameData.ctTime,this.aniTimer.addEventListener(egret.TimerEvent.TIMER,this.subTime,this),this.aniTimer.addEventListener(egret.TimerEvent.TIMER_COMPLETE,this.timeOver,this),this.aniTimer.reset(),this.aniTimer.start()},t.prototype.subTime=function(){this.ctCount-=1,2==this.ctCount?(this.ct321[1].visible=!0,this.ct321[0].visible=!1,this.ct321[2].visible=!1):1==this.ctCount&&(this.ct321[1].visible=!1,this.ct321[0].visible=!0,this.ct321[2].visible=!1)},t.prototype.timeOver=function(){console.log("???"),EventManager.pub("sendMessage",{state:"next"})},t}(ModalLayer);__reflect(AnimationModal.prototype,"AnimationModal");var RankBar=function(e){function t(){var t=e.call(this)||this;return t.rLogo=new Bitmap({source:"pic_redjt_png"}),t.addChild(t.rLogo),t.rCont=new TextField({fontFamily:"YouYuan",text:"增加120分",size:28,color:6627590,bold:!0}),t.rCont.x=t.rLogo.width+20,t.rCont.y=15,t.addChild(t.rCont),t}return __extends(t,e),Object.defineProperty(t.prototype,"score",{set:function(e){e>=0?(this.rCont.text="增加"+e.toString()+"分",this.rLogo.src="pic_redjt_png"):0>e&&(this.rCont.text="降低"+e.toString()+"分",this.rLogo.src="pic_bluejt_png")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rank",{set:function(e){e>=0?(this.rCont.text="排名上升"+e.toString()+"名",this.rLogo.src="pic_redjt_png"):0>e&&(this.rCont.text="排名降下降"+e.toString()+"名",this.rLogo.src="pic_bluejt_png")},enumerable:!0,configurable:!0}),t}(egret.Sprite);__reflect(RankBar.prototype,"RankBar");var TitleBar=function(e){function t(){var t=e.call(this)||this;return t.sBg=new Bitmap({source:"pic_banner_png"}),t.addChild(t.sBg),t.sCont=new TextField({fontFamily:"YouYuan",text:"你和XX搭档在120秒共计干掉了XX对情侣",color:16777215,x:50,y:130,size:28,width:560,height:50,textAlign:"center",verticalAlign:"middle"}),t.addChild(t.sCont),t}return __extends(t,e),Object.defineProperty(t.prototype,"score",{get:function(){return this.sCont.text},set:function(e){this.sCont.text=e},enumerable:!0,configurable:!0}),t}(egret.DisplayObjectContainer);__reflect(TitleBar.prototype,"TitleBar");var LoadingUI=function(e){function t(){var t=e.call(this)||this;return t.createView(),t}return __extends(t,e),t.prototype.createView=function(){this.textField=new egret.TextField,this.addChild(this.textField),this.textField.y=300,this.textField.width=480,this.textField.height=100,this.textField.textAlign="center"},t.prototype.setProgress=function(e,t){this.textField.text="Loading..."+e+"/"+t},t}(egret.Sprite);__reflect(LoadingUI.prototype,"LoadingUI");var Main=function(e){function t(){var t=e.call(this)||this;return t.addEventListener(egret.Event.ADDED_TO_STAGE,t.onAddToStage,t),t}return __extends(t,e),t.prototype.onAddToStage=function(e){this.loadingView=new LoadingUI,this.stage.addChild(this.loadingView),RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig("resource/default.res.json","resource/")},t.prototype.onConfigComplete=function(e){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),RES.loadGroup("preload")},t.prototype.onResourceLoadComplete=function(e){"preload"==e.groupName&&(this.stage.removeChild(this.loadingView),RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),this.createGameScene())},t.prototype.onItemLoadError=function(e){console.warn("Url:"+e.resItem.url+" has failed to load")},t.prototype.onResourceLoadError=function(e){console.warn("Group:"+e.groupName+" has failed to load"),this.onResourceLoadComplete(e)},t.prototype.onResourceProgress=function(e){"preload"==e.groupName&&this.loadingView.setProgress(e.itemsLoaded,e.itemsTotal)},t.prototype.createGameScene=function(){UImanager=new UIManager(this),UImanager.to("hall")},t.prototype.createBitmapByName=function(e){var t=new egret.Bitmap,i=RES.getRes(e);return t.texture=i,t},t.prototype.startAnimation=function(e){var t=this,i=new egret.HtmlTextParser,n=e.map(function(e){return i.parse(e)}),o=this.textfield,r=-1,a=function(){r++,r>=n.length&&(r=0);var e=n[r];o.textFlow=e;var i=egret.Tween.get(o);i.to({alpha:1},200),i.wait(2e3),i.to({alpha:0},200),i.call(a,t)};a()},t}(egret.DisplayObjectContainer);__reflect(Main.prototype,"Main");var GameData=function(){function e(){}return e}();GameData.countDown=0,GameData.ctTime=3,GameData.teamMateName="XX",GameData.offX=50,GameData.isAnswer=!1,GameData.tCopy=["点错会减少5秒哦","对友点错，减少5秒！","你点错了，减少5秒！"],GameData.fCopy=["目前你们都没有找到情侣哦，抓紧时间找到他们并拆散这对情侣吧","你已锁定情侣，帮助对方也找到这对狗男女，即可干掉这对情侣！","对方已锁定情侣，听取对方的建议，你可以更快的找到情侣哦","恭喜你们都成功的锁定了情侣，马上进入下一关！"],__reflect(GameData.prototype,"GameData");var UIConfig=function(){function e(){}return e}();UIConfig.useTransition=!0,UIConfig.width=710,UIConfig.height=426,UIConfig.stageW=0,UIConfig.stageH=0,UIConfig.offsetW=0,UIConfig.offsetH=0,__reflect(UIConfig.prototype,"UIConfig");var UIManager=function(){function e(e){this.info={},this.setContainer(e)}return e.prototype.fListen=function(){var e=this,t=this;EventManager.sub("modal/onShowModal",function(e){t.showModal(e)}),EventManager.sub("modal/onModalClose",function(){e.currentModal&&(e.currentModal.parent?(egret.Tween.removeTweens(e.currentModal),egret.Tween.get(e.currentModal).to({alpha:0},200).call(function(){e.currentModal.parent&&e.container.removeChild(e.currentModal),e.currentModal=void 0})):e.currentModal=void 0)})},e.prototype.setContainer=function(e){this.container=e;var t=egret.MainContext.instance.stage;UIConfig.stageW=t.stageWidth,UIConfig.stageH=t.stageHeight,UIConfig.offsetW=(t.stageWidth-UIConfig.width)/2,UIConfig.offsetH=(t.stageHeight-UIConfig.height)/2,this.container.width=UIConfig.stageW,this.container.height=UIConfig.stageH,this.container.stage.addEventListener(egret.Event.RESIZE,this.onResize,this),this.fListen()},e.prototype.onResize=function(){var e=egret.MainContext.instance.stage;if(UIConfig.stageW=e.stageWidth,UIConfig.stageH=e.stageHeight,this.container.width=UIConfig.stageW,this.container.height=UIConfig.stageH,this.currentScene){if(this.currentScene.noAutoResize)return void this.currentScene.onResize();if(this.currentScene.width=UIConfig.width,this.currentScene.height=UIConfig.height,this.currentScene.x=(UIConfig.stageW-UIConfig.width)/2,this.currentScene.y=(UIConfig.stageH-UIConfig.height)/2,this.currentScene.onResize&&this.currentScene.onResize(),this.currentScene.bg){var t=this.currentScene.globalToLocal(0,0);this.currentScene.bg.x=t.x,this.currentScene.bg.y=t.y,this.currentScene.bg.width=this.container.width,this.currentScene.bg.height=this.container.height}}console.log("stage.stageHeight",e.stageHeight),console.log("UIConfig.height",UIConfig.height),console.log("offsetH",UIConfig.offsetH),UIConfig.offsetW=(e.stageWidth-UIConfig.width)/2,UIConfig.offsetH=(e.stageHeight-UIConfig.height)/2},e.prototype.showResult=function(e){e=e||{isWin:!0,mine:{name:"我不",base:"3",rate:"20",score:"50"},opp:{name:"名字好难取",base:"30000",rate:"240",score:"500000"},winType:1,scoreTips:"1231",mult:[1,2,3,4,5]}},e.prototype.showModal=function(e,t){void 0===t&&(t={});var i;switch(e){case 0:this.animationModal=this.animationModal||new AnimationModal,this.animationModal.ct321[2].visible=!0,this.animationModal.ct321[0].visible=!1,this.animationModal.pBoy.x=360,this.animationModal.pGirl.x=80,i=this.animationModal;break;case 1:break;case 2:break;case 3:}this.currentModal&&(this.container.removeChild(this.currentModal),this.currentModal=void 0),i?(this.currentModal=i,this.container.addChildAt(i,50),EventManager.pub("startCT")):console.warn("modal类型未定义")},e.prototype.to=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){switch(e){case"hall":this.sceneHall=this.sceneHall||new SceneHall,this.add(this.sceneHall);break;case"game":this.sceneGame=this.sceneGame||new SceneGame,this.add(this.sceneGame);break;case"over":this.sceneOver=this.sceneOver||new SceneOver,this.add(this.sceneOver),EventManager.pub("showLevel")}return[2]})})},e.prototype.add=function(e){return __awaiter(this,void 0,void 0,function(){var t,i;return __generator(this,function(n){switch(n.label){case 0:return this.currentScene?this.currentScene==e?(this.currentScene.onLeave&&this.currentScene.onLeave(),this.currentScene.onEnter&&this.currentScene.onEnter(),[2]):[4,this.remove(this.currentScene)]:[3,2];case 1:n.sent(),console.log("====原场景已移除===="),n.label=2;case 2:return e.width=UIConfig.width,e.height=UIConfig.height,e.x=(UIConfig.stageW-UIConfig.width)/2,e.y=(UIConfig.stageH-UIConfig.height)/2,e.bg&&(t=e.globalToLocal(0,0),e.bg.x=t.x,e.bg.y=t.y,e.bg.width=this.container.width,e.bg.height=this.container.height),i=e.onEnter||new Function,e.once(egret.Event.ADDED_TO_STAGE,i,e),this.container.addChildAt(e,0),console.log("====加载新场景成功===="),this.currentScene=e,UIConfig.useTransition?[4,this.transform(e)]:[3,4];case 3:n.sent(),n.label=4;case 4:return[2]}})})},e.prototype.remove=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return this.container.contains(e)?UIConfig.useTransition?[4,this.transform(e,!1)]:[3,2]:[3,3];case 1:t.sent(),t.label=2;case 2:e.onLeave&&e.onLeave(),this.container.removeChild(e),this.currentScene=void 0,t.label=3;case 3:return[2]}})})},e.prototype.transform=function(e,t,i){return void 0===t&&(t=!0),void 0===i&&(i=300),__awaiter(this,void 0,void 0,function(){var n,o,r;return __generator(this,function(a){switch(a.label){case 0:return n={alpha:0},o={alpha:1},t||(r=[o,n],n=r[0],o=r[1]),[4,function(){return new Promise(function(t,r){egret.Tween.get(e).set(n).to(o,i).call(function(){t()})})}()];case 1:return a.sent(),[2]}})})},e}();__reflect(UIManager.prototype,"UIManager");var UImanager,SceneGame=function(e){function t(){var t=e.call(this)||this;return t.bg=new egret.Bitmap(RES.getRes("public_bg2_png")),t.peoples=[],t.addChild(t.bg),t.findTip=new FindTip,t.findTip.x=20,t.findTip.y=5,t.addChild(t.findTip),t.gClock=new Clock,t.gClock.x=(UIConfig.stageW-t.gClock.width)/2,t.gClock.y=15,t.addChild(t.gClock),t.timeTip=new TimeTip,t.timeTip.x=440,t.timeTip.y=13,t.addChild(t.timeTip),t.killTip=new KillTip,t.killTip.x=UIConfig.stageW-t.killTip.width-10,t.killTip.y=10,t.addChild(t.killTip),t.touchLayer=new egret.Shape,t.touchLayer.graphics.beginFill(0,0),t.touchLayer.graphics.drawRect(0,0,710,362),t.touchLayer.graphics.endFill(),t.touchLayer.x=0,t.touchLayer.y=64,t.addChild(t.touchLayer),t.touchLayer.touchEnabled=!0,t.touchLayer.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){EventManager.pub("sendMessage",{state:"find",answer:-1})},t),t.folkMap=new egret.Sprite,t.folkMap.width=710,t.folkMap.height=362,t.folkMap.x=0,t.folkMap.y=64,t.addChild(t.folkMap),t.pCir=new Bitmap({source:"pic_sdk_png"}),EventManager.sub("currentOff",function(e){t.killTip.level=e}),EventManager.sub("produceMap",function(e){t.resetAll();for(var i=0;i<e.length;i++){var n=e[i].split(",");t.peoples[i]=new People(n[2]),t.peoples[i].x=parseInt(n[0]),t.peoples[i].y=parseInt(n[1]),t.folkMap.addChild(t.peoples[i])}}),EventManager.sub("isLover",function(e){GameData.loverID=e,t.peoples[e].touchEnabled=!0,t.pCir.x=-(t.pCir.width-t.peoples[e].width)/2+t.peoples[e].x-t.peoples[e].width/2,t.pCir.y=(t.peoples[e].height-t.pCir.height)/2+t.peoples[e].y,t.pCir.visible=!1,t.addChild(t.pCir),t.peoples[e].addEventListener(egret.TouchEvent.TOUCH_TAP,function(){EventManager.pub("sendMessage",{state:"find",answer:GameData.loverID})},t)}),EventManager.sub("openRedCir",function(){t.pCir.visible=!0}),EventManager.sub("findFalse",function(e){e.answerId==GameData.nId?t.timeTip.cont=GameData.tCopy[2]:t.timeTip.cont=GameData.tCopy[1],t.gClock.time=e.timeLeft}),EventManager.sub("findTrue",function(e){e.answerId==GameData.nId?(t.findTip.cont=GameData.fCopy[1],EventManager.pub("openRedCir"),t.touchLayer.touchEnabled=!1,t.peoples[GameData.loverID].touchEnabled=!1):GameData.isAnswer?t.findTip.cont=GameData.fCopy[3]:GameData.isAnswer||(t.findTip.cont=GameData.fCopy[2],GameData.isAnswer=!0)}),EventManager.sub("stopTime",function(){t.gClock.cTime.stop()}),EventManager.sub("storeLevel",function(e){GameData.gameLevel=e}),t}return __extends(t,e),t.prototype.resetAll=function(){this.peoples=[],this.folkMap&&this.folkMap.removeChildren(),this.touchLayer.touchEnabled=!0,this.findTip.cont=GameData.fCopy[0],this.timeTip.cont=GameData.tCopy[0],GameData.isAnswer=!1},t}(egret.DisplayObjectContainer);__reflect(SceneGame.prototype,"SceneGame");var SceneHall=function(e){function t(){var t=e.call(this)||this;return t.bg=new egret.Bitmap(RES.getRes("public_bg_png")),t.init(),t.fListen(),t}return __extends(t,e),t.prototype.init=function(){var e=this;this&&this.removeChildren(),this.addChild(this.bg),this.hScore=new ScoreBar(0),this.hScore.x=60,this.hScore.y=6,this.addChild(this.hScore),this.hScore.score="156",this.hRank=new ScoreBar(1),this.hRank.x=390,this.hRank.y=6,this.addChild(this.hRank),this.hRank.score="123456",this.hLogo=new Bitmap({source:"pic_logo_png",width:526,height:240,y:60}),this.hLogo.x=(UIConfig.stageW-this.hLogo.width)/2,this.addChild(this.hLogo),this.hDes=new Bitmap({source:"text_lszql_png",y:305}),this.hDes.x=(UIConfig.stageW-this.hDes.width)/2,this.addChild(this.hDes),this.hBtn=new Button(0,0),this.hBtn.y=342,this.hBtn.x=(UIConfig.stageW-this.hBtn.width)/2,this.addChild(this.hBtn),this.hBtn.touchEnabled=!0,this.hBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){"btn_public_n_png"==e.hBtn.Bg&&EventManager.pub("sendMessage",{state:"ready",nId:GameData.nId,roomId:GameData.roomId}),e.hBtn.Bg="btn_public_p_png",e.hBtn.Type="btn_pic_dadf_png"},this)},t.prototype.fListen=function(){var e=this;EventManager.sub("updataScore",function(t){e.hScore.score=t.score,e.hRank.score=t.rank,GameData.oldScore=t.score,GameData.oldRank=t.rank})},t.prototype.onLeave=function(){this.init()},t}(egret.DisplayObjectContainer);__reflect(SceneHall.prototype,"SceneHall");var SceneOver=function(e){function t(){var t=e.call(this)||this;t.bg=new egret.Bitmap(RES.getRes("public_bg_png")),t.addChild(t.bg),t.oScore=new ScoreBar(0),t.oScore.x=60,t.oScore.y=6,t.addChild(t.oScore),t.oScore.score="123456",t.oRank=new ScoreBar(1),t.oRank.x=390,t.oRank.y=6,t.addChild(t.oRank),t.oTitle=new TitleBar,t.oTitle.x=(UIConfig.stageW-t.oTitle.width)/2,t.oTitle.y=50,t.addChild(t.oTitle),t.diffScore=new RankBar,t.diffScore.x=110,t.diffScore.y=270,t.addChild(t.diffScore),t.diffRank=new RankBar,t.diffRank.x=370,t.diffRank.y=270,t.addChild(t.diffRank),t.hBtn=new Button(0,2),t.hBtn.y=342,t.hBtn.x=(UIConfig.stageW-t.hBtn.width)/2,t.addChild(t.hBtn),t.hBtn.touchEnabled=!0,t.hBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){"btn_pic_hdsy_png"==t.hBtn.Type&&UImanager.to("hall")},t),EventManager.sub("showLevel",function(){t.oTitle.score="你和搭档在120秒共计干掉了"+GameData.gameLevel+"对情侣"}),EventManager.sub("updataScore",function(e){t.oScore.score=e.score,t.oRank.score=e.rank;var i=GameData.oldScore-e.score,n=GameData.oldRank-e.rank;GameData.oldScore=e.score,GameData.oldRank=e.rank,t.diffScore.score=i,t.diffRank.rank=n});var i=10*(GameData.gameLevel-1);return EventManager.pub("returnScore",i),t}return __extends(t,e),t}(egret.DisplayObjectContainer);__reflect(SceneOver.prototype,"SceneOver");